/*
================================================================================
 Amazon PayFort - Elegant & Functional Custom Payment Form CSS
 Version 10.1: Bottom-Border Theme Fix
================================================================================
 * This version implements a bottom-border-only input style.
 * It uses a stable grid layout and addresses specific icon/spinner issues.
================================================================================
*/

/* Prevent scroll on html and body */
html {
  height: 100% !important;
  overflow: hidden !important;
}

/* Global box-sizing to prevent overflow */
*,
*::before,
*::after {
  box-sizing: border-box !important;
}

/* --- THEME VARIABLE DEFINITIONS --- */
:root {
  /* Light Theme (Default) */
  --pf-bg-body: #fff;
  --pf-bg-card: #ffffff; /* Renamed from --pf-bg-input for clarity */
  --pf-text-primary: #333333;
  --pf-text-label: #555555;
  --pf-border-color: #cccccc;
  --pf-border-focus: #007bff;
  --pf-placeholder: #a9a9a9;
  --pf-error: #dc3545;
  --pf-shadow: rgba(0, 0, 0, 0.05);

  /* Pay Button */
  --pf-button-bg: #ffd700;
  --pf-button-text: #000000;
  --pf-button-hover-bg: #ffdd1a;
  --pf-button-active-bg: #e6c200;
  --pf-button-disabled-bg: #e0e0e0;
}

/* --- DARK THEME OVERRIDES --- */
@media (prefers-color-scheme: dark) {
  :root {
    --pf-bg-body: #121212;
    --pf-bg-card: #1e1e1e;
    --pf-text-primary: #e0e0e0;
    --pf-text-label: #bbbbbb;
    --pf-border-color: #555555;
    --pf-border-focus: #82b1ff;
    --pf-placeholder: #888888;
    --pf-error: #ff6b6b;
    --pf-shadow: rgba(0, 0, 0, 0.4);
    --pf-button-disabled-bg: #444444;
  }
}

/* --- GLOBAL & BODY STYLES --- */
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, sans-serif !important;
  padding: 10px !important;
  margin: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-height: 100% !important;

  background-color: var(--pf-bg-body) !important;
  color: var(--pf-text-primary) !important;
  overflow: hidden !important; /* Prevent body scroll */
}

/* --- WRAPPER (NO BORDER) --- */
.wrapper {
  width: 100% !important;
  max-width: 480px !important;
  background: var(--pf-bg-body) !important;
  border-radius: 12px !important;
  box-shadow: 0 6px 20px var(--pf-shadow) !important;
  padding: 30px !important;
  margin: 20px auto !important;
  border: none !important; /* FIX: Removed wrapper border */
  overflow: hidden !important; /* FIX: Changed from hidden to visible to prevent scroll */
}

/* --- GRID LAYOUT --- */
/* A robust grid to control element placement properly */
.container {
  display: grid !important;
  grid-template-columns: 1fr 1fr !important;
  gap: 20px !important;
  padding: 0 !important;
  background: transparent !important;
  border: none !important;
}

/* Grid placement rules */
.container > .input:first-of-type {
  grid-column: 1 / 3;
} /* Card Number */
.container > #cardNumErrHintSpan {
  grid-column: 1 / 3;
  margin-top: -15px;
}

.container > .half-containter:has(#expDateInput) {
  grid-column: 1 / 2;
} /* MM/YY */
.container > .half-containter:has(#cvvInput) {
  grid-column: 2 / 3;
} /* CVV */

.container > #expDateErrHintSpan {
  grid-column: 1 / 2;
  margin-top: -15px;
}
.container > #allEmptyErrHintSpan {
  grid-column: 2 / 3;
  margin-top: -15px;
}

/* FIX: Cardholder name spans full width */
.container > .half-containter:has(#chNameInput) {
  grid-column: 1 / 3;
}
.container > #cardHolderErrHintSpan {
  grid-column: 1 / 3;
  margin-top: -15px;
}

.container > .pay {
  grid-column: 1 / 3;
  margin-top: 20px;
}

/* --- INPUTS & LABELS (BOTTOM BORDER THEME) --- */
.input,
.half-containter {
  position: relative !important;
  padding-top: 18px !important; /* Space for the label above */
  margin: 0 !important;
  background: transparent !important;
  border: none !important; /* Remove borders from containers */
  float: none !important; /* Disable PayFort's floats */
  width: 100% !important;
}

.input-field {
  width: 100% !important;
  padding: 8px 40px 8px 0 !important; /* Add right space for brand icon */
  font-size: 16px !important;
  color: var(--pf-text-primary) !important;
  background-color: transparent !important;
  outline: none !important;
  box-shadow: none !important;
  -webkit-appearance: none !important;
  appearance: none !important;
  border-radius: 0 !important; /* No rounded corners */
  border: none !important; /* Remove all borders first */
  border-bottom: 2px solid var(--pf-border-color) !important; /* FIX: Bottom border only */
  transition: border-color 0.3s ease !important;
}

.input-field:focus {
  border-bottom-color: var(
    --pf-border-focus
  ) !important; /* Animate bottom border color on focus */
}

/* Specific fonts for numeric inputs */
#cardNoInput,
#expDateInput,
#cvvInput {
  font-family: "SF Mono", "Consolas", "Courier New", monospace !important;
  letter-spacing: 1.5px !important;
}

/* --- LABEL POSITIONING --- */
/* We place the label statically above the input field. */
.input-label {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  color: var(--pf-text-label) !important;
  font-size: 12px !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.5px !important;
  padding: 0 !important;
  transform: none !important; /* Disable JS animations */
  pointer-events: none !important;
}

.input-field:focus + .input-label {
  color: var(--pf-border-focus) !important;
}

/* Hide PayFort's animated content span and default icons */
.input-label-content,
.input-label > i.icon-calendar-empty,
.input-label > i.icon-lock,
.input-label > i.icon-user {
  display: none !important;
}
/* Show and position the credit-card brand icon */
.input .input-label > i.icon-credit-card {
  display: block !important;
  position: absolute !important;
  right: 8px !important;
  bottom: 10px !important;
  transform: none !important;
  pointer-events: none !important;
}
/* Re-create the label text using a pseudo-element */
.input:has(#cardNoInput) .input-label::after {
  content: "Card Number";
}
.half-containter:has(#expDateInput) .input-label::after {
  content: "MM/YY";
}
.half-containter:has(#cvvInput) .input-label::after {
  content: "CVV";
}
.half-containter:has(#chNameInput) .input-label::after {
  content: "Cardholder Name";
}

/* --- CARD ICON MANAGEMENT --- */
/* Position all card icons cleanly on the right */
/* Ensure the detected brand icon (e.g. Visa) is positioned correctly.
   We don't force visibility here so the PayFort script can toggle
   display based on the detected brand. */
.input i.visa,
.input i.mastercard,
.input i.amex,
.input i.mada,
.input i.meeza {
  position: absolute !important;
  right: 8px !important;
  bottom: 10px !important;
  transform: none !important;
  margin: 0 !important;
  height: 18px !important;
  width: auto !important;
  pointer-events: none !important;
}

/* --- ERROR MESSAGES --- */
.popover {
  display: none;
  background: transparent !important;
  padding: 4px 0 0 0 !important;
  box-shadow: none !important;
  border: none !important;
  min-height: 18px !important;
}

.popover.block {
  display: block !important;
}

.popover .content {
  color: var(--pf-error) !important;
  font-size: 13px !important;
  font-weight: 500 !important;
  text-align: left !important;
}
.popover .content em {
  font-style: normal !important;
  font-weight: 700 !important;
}
/* Add a red border to the input when its associated error popover is visible */
.input-field:has(~ .popover.block) {
  border-bottom-color: var(--pf-error) !important;
}
.input-field:has(~ .popover.block) + .input-label {
  color: var(--pf-error) !important;
}

/* --- PAY BUTTON & SPINNER --- */
.pay {
  display: block !important;
  width: 100% !important;
  background: var(--pf-button-bg) !important;
  color: var(--pf-button-text) !important;
  border: none !important;
  padding: 16px 30px !important;
  border-radius: 50px !important;
  font-size: 18px !important;
  font-weight: 700 !important;
  cursor: pointer !important;
  transition: background-color 0.3s ease, transform 0.1s ease !important;
}
.pay:hover:not(:disabled) {
  background: var(--pf-button-hover-bg) !important;
  transform: translateY(-2px) !important;
}
.pay:active:not(:disabled) {
  background: var(--pf-button-active-bg) !important;
  transform: translateY(0) !important;
}
.pay:disabled {
  opacity: 0.7 !important;
  cursor: not-allowed !important;
  background: var(--pf-button-disabled-bg) !important;
}

/* FIX: Only show the spinner when JS makes it visible. Don't force it. */
.pay #loadingI {
  display: none; /* Hidden by default */
}
.pay.loading #loadingI {
  display: inline-block !important; /* Show when .loading class is added by JS */
}

/* --- FINAL CLEANUP --- */
input[type="hidden"],
.noscript-message,
.tooltip {
  display: none !important;
}
* {
  overflow: visible !important;
}
